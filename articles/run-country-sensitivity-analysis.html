<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>run-country-sensitivity-analysis • trisk.analysis</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="run-country-sensitivity-analysis">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">trisk.analysis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/apply-stress-test-on-portfolio.html">apply-stress-test-on-portfolio</a></li>
    <li><a class="dropdown-item" href="../articles/input-data-summary.html">input-data-summary</a></li>
    <li><a class="dropdown-item" href="../articles/run-country-sensitivity-analysis.html">run-country-sensitivity-analysis</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="run-country-sensitivity-analysis_files/kePrint-0.0.1/kePrint.js"></script><link href="run-country-sensitivity-analysis_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>run-country-sensitivity-analysis</h1>
            
      

      <div class="d-none name"><code>run-country-sensitivity-analysis.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">trisk.analysis</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">assets_testdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testdata"</span>, <span class="st">"assets_testdata.csv"</span>, package <span class="op">=</span> <span class="st">"trisk.model"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">scenarios_testdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testdata"</span>, <span class="st">"scenarios_testdata.csv"</span>, package <span class="op">=</span> <span class="st">"trisk.model"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">financial_features_testdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testdata"</span>, <span class="st">"financial_features_testdata.csv"</span>, package <span class="op">=</span> <span class="st">"trisk.model"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ngfs_carbon_price_testdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testdata"</span>, <span class="st">"ngfs_carbon_price_testdata.csv"</span>, package <span class="op">=</span> <span class="st">"trisk.model"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="sensitivity-analysis">Sensitivity Analysis<a class="anchor" aria-label="anchor" href="#sensitivity-analysis"></a>
</h3>
<p>Sensitivity analysis allows us to explore how changes in parameters
affect the results. In this example, we show how to vary the shock year
in multiple TRISK runs when defining run parameters for sensitivity
analysis.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">run_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    scenario_geography <span class="op">=</span> <span class="st">"Global"</span>,</span>
<span>    baseline_scenario <span class="op">=</span> <span class="st">"NGFS2023GCAM_CP"</span>,</span>
<span>    target_scenario <span class="op">=</span> <span class="st">"NGFS2023GCAM_NZ2050"</span>,</span>
<span>    shock_year <span class="op">=</span> <span class="fl">2030</span> <span class="co"># SHOCK YEAR 1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    scenario_geography <span class="op">=</span> <span class="st">"Global"</span>,</span>
<span>    baseline_scenario <span class="op">=</span> <span class="st">"NGFS2023GCAM_CP"</span>,</span>
<span>    target_scenario <span class="op">=</span> <span class="st">"NGFS2023GCAM_NZ2050"</span>,</span>
<span>    shock_year <span class="op">=</span> <span class="fl">2025</span> <span class="co"># SHOCK YEAR 2</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>You can also perform sensitivity analysis on a filtered subset of
assets. This example filters the dataset by country, and then runs the
analysis.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run sensitivity analysis across multiple TRISK runs</span></span>
<span><span class="va">sensitivity_analysis_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_trisk_sa.html">run_trisk_sa</a></span><span class="op">(</span></span>
<span>  assets_data <span class="op">=</span> <span class="va">assets_testdata</span>,</span>
<span>  scenarios_data <span class="op">=</span> <span class="va">scenarios_testdata</span>,</span>
<span>  financial_data <span class="op">=</span> <span class="va">financial_features_testdata</span>,</span>
<span>  carbon_data <span class="op">=</span> <span class="va">ngfs_carbon_price_testdata</span>,</span>
<span>  run_params <span class="op">=</span> <span class="va">run_params</span>,</span>
<span>  country_iso2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DE"</span><span class="op">)</span> <span class="co"># FILTER ASSETS ON COUNTRIES</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Starting the execution of 2 total runs"</span></span>
<span><span class="co">#&gt; -- Processing Assets and Scenarios. </span></span>
<span><span class="co">#&gt; -- Transforming to Trisk model input. </span></span>
<span><span class="co">#&gt; -- Calculating baseline, target, and shock trajectories. </span></span>
<span><span class="co">#&gt; -- Calculating net profits. </span></span>
<span><span class="co">#&gt; -- Calculating market risk. </span></span>
<span><span class="co">#&gt; -- Calculating credit risk. </span></span>
<span><span class="co">#&gt; [1] "Done 1 / 2 total runs"</span></span>
<span><span class="co">#&gt; -- Processing Assets and Scenarios. </span></span>
<span><span class="co">#&gt; -- Transforming to Trisk model input. </span></span>
<span><span class="co">#&gt; -- Calculating baseline, target, and shock trajectories. </span></span>
<span><span class="co">#&gt; -- Calculating net profits. </span></span>
<span><span class="co">#&gt; -- Calculating market risk. </span></span>
<span><span class="co">#&gt; -- Calculating credit risk. </span></span>
<span><span class="co">#&gt; [1] "Done 2 / 2 total runs"</span></span>
<span><span class="co">#&gt; [1] "All runs completed."</span></span></code></pre></div>
<p>Contrary to a simple run of trisk with the “run_trisk” function, here
it is possible to navigate through multiple Trisk runs in the same
dataframe, using the run_id column as an index.</p>
<p>Consolidated NPV results</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sensitivity_analysis_results</span><span class="op">$</span><span class="va">npv</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html" class="external-link">scroll_box</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span>, height <span class="op">=</span> <span class="st">"400px"</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
run_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
company_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
asset_id
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
company_name
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
asset_name
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
sector
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
technology
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
net_present_value_baseline
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
net_present_value_shock
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:left;">
Gas
</td>
<td style="text-align:right;">
172718.3
</td>
<td style="text-align:right;">
13549.28
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
102
</td>
<td style="text-align:right;">
102
</td>
<td style="text-align:left;">
Company 2
</td>
<td style="text-align:left;">
Company 2
</td>
<td style="text-align:left;">
Coal
</td>
<td style="text-align:left;">
Coal
</td>
<td style="text-align:right;">
42299475.0
</td>
<td style="text-align:right;">
4317747.56
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
103
</td>
<td style="text-align:right;">
103
</td>
<td style="text-align:left;">
Company 3
</td>
<td style="text-align:left;">
Company 3
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:left;">
Gas
</td>
<td style="text-align:right;">
95105145.4
</td>
<td style="text-align:right;">
24864754.17
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:left;">
Company 4
</td>
<td style="text-align:left;">
Company 4
</td>
<td style="text-align:left;">
Power
</td>
<td style="text-align:left;">
RenewablesCap
</td>
<td style="text-align:right;">
497029538.6
</td>
<td style="text-align:right;">
789241252.58
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:left;">
Company 5
</td>
<td style="text-align:left;">
Company 5
</td>
<td style="text-align:left;">
Power
</td>
<td style="text-align:left;">
CoalCap
</td>
<td style="text-align:right;">
176175702.5
</td>
<td style="text-align:right;">
11874146.56
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:left;">
Company 5
</td>
<td style="text-align:left;">
Company 5
</td>
<td style="text-align:left;">
Power
</td>
<td style="text-align:left;">
OilCap
</td>
<td style="text-align:right;">
21412749.3
</td>
<td style="text-align:right;">
1416673.16
</td>
</tr>
</tbody>
</table>
</div>
<p>Consolidated PD results</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sensitivity_analysis_results</span><span class="op">$</span><span class="va">pd</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html" class="external-link">scroll_box</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span>, height <span class="op">=</span> <span class="st">"400px"</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
run_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
company_id
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
company_name
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
sector
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
term
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
pd_baseline
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
pd_shock
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0382660
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.1121338
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.0000011
</td>
<td style="text-align:right;">
0.1680445
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0.0000237
</td>
<td style="text-align:right;">
0.2098967
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.0001502
</td>
<td style="text-align:right;">
0.2425541
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
102
</td>
<td style="text-align:left;">
Company 2
</td>
<td style="text-align:left;">
Coal
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0197957
</td>
</tr>
</tbody>
</table>
</div>
<p>Consolidated company trajectories</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sensitivity_analysis_results</span><span class="op">$</span><span class="va">trajectories</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html" class="external-link">scroll_box</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span>, height <span class="op">=</span> <span class="st">"400px"</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
run_id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
asset_id
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
asset_name
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
company_id
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
company_name
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
year
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
sector
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
technology
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
production_plan_company_technology
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
production_baseline_scenario
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
production_target_scenario
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
production_shock_scenario
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
pd
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
net_profit_margin
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
debt_equity_ratio
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
volatility
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
scenario_price_baseline
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
price_shock_scenario
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
net_profits_baseline_scenario
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
net_profits_shock_scenario
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
discounted_net_profits_baseline_scenario
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
discounted_net_profits_shock_scenario
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:right;">
2022
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:left;">
Gas
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
5000.000
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
0.0056224
</td>
<td style="text-align:right;">
0.0763542
</td>
<td style="text-align:right;">
0.1297317
</td>
<td style="text-align:right;">
0.259323
</td>
<td style="text-align:right;">
5.867116
</td>
<td style="text-align:right;">
5.867116
</td>
<td style="text-align:right;">
2239.895
</td>
<td style="text-align:right;">
2239.895
</td>
<td style="text-align:right;">
2239.895
</td>
<td style="text-align:right;">
2239.895
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:right;">
2023
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:left;">
Gas
</td>
<td style="text-align:right;">
5423
</td>
<td style="text-align:right;">
5423
</td>
<td style="text-align:right;">
5001.354
</td>
<td style="text-align:right;">
5423
</td>
<td style="text-align:right;">
0.0056224
</td>
<td style="text-align:right;">
0.0763542
</td>
<td style="text-align:right;">
0.1297317
</td>
<td style="text-align:right;">
0.259323
</td>
<td style="text-align:right;">
5.898569
</td>
<td style="text-align:right;">
5.898569
</td>
<td style="text-align:right;">
2442.414
</td>
<td style="text-align:right;">
2442.414
</td>
<td style="text-align:right;">
2282.630
</td>
<td style="text-align:right;">
2282.630
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:right;">
2024
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:left;">
Gas
</td>
<td style="text-align:right;">
6200
</td>
<td style="text-align:right;">
6200
</td>
<td style="text-align:right;">
5002.708
</td>
<td style="text-align:right;">
6200
</td>
<td style="text-align:right;">
0.0056224
</td>
<td style="text-align:right;">
0.0763542
</td>
<td style="text-align:right;">
0.1297317
</td>
<td style="text-align:right;">
0.259323
</td>
<td style="text-align:right;">
5.930022
</td>
<td style="text-align:right;">
5.930022
</td>
<td style="text-align:right;">
2807.250
</td>
<td style="text-align:right;">
2807.250
</td>
<td style="text-align:right;">
2451.961
</td>
<td style="text-align:right;">
2451.961
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:right;">
2025
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:left;">
Gas
</td>
<td style="text-align:right;">
7400
</td>
<td style="text-align:right;">
7400
</td>
<td style="text-align:right;">
5004.062
</td>
<td style="text-align:right;">
7400
</td>
<td style="text-align:right;">
0.0056224
</td>
<td style="text-align:right;">
0.0763542
</td>
<td style="text-align:right;">
0.1297317
</td>
<td style="text-align:right;">
0.259323
</td>
<td style="text-align:right;">
5.961475
</td>
<td style="text-align:right;">
5.961475
</td>
<td style="text-align:right;">
3368.360
</td>
<td style="text-align:right;">
3368.360
</td>
<td style="text-align:right;">
2749.585
</td>
<td style="text-align:right;">
2749.585
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:right;">
2026
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:left;">
Gas
</td>
<td style="text-align:right;">
7800
</td>
<td style="text-align:right;">
7800
</td>
<td style="text-align:right;">
4862.620
</td>
<td style="text-align:right;">
7800
</td>
<td style="text-align:right;">
0.0056224
</td>
<td style="text-align:right;">
0.0763542
</td>
<td style="text-align:right;">
0.1297317
</td>
<td style="text-align:right;">
0.259323
</td>
<td style="text-align:right;">
5.945170
</td>
<td style="text-align:right;">
5.945170
</td>
<td style="text-align:right;">
3540.723
</td>
<td style="text-align:right;">
3540.723
</td>
<td style="text-align:right;">
2701.201
</td>
<td style="text-align:right;">
2701.201
</td>
</tr>
<tr>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:left;">
Company 1
</td>
<td style="text-align:right;">
2027
</td>
<td style="text-align:left;">
Oil&amp;Gas
</td>
<td style="text-align:left;">
Gas
</td>
<td style="text-align:right;">
8600
</td>
<td style="text-align:right;">
8600
</td>
<td style="text-align:right;">
4721.178
</td>
<td style="text-align:right;">
8600
</td>
<td style="text-align:right;">
0.0056224
</td>
<td style="text-align:right;">
0.0763542
</td>
<td style="text-align:right;">
0.1297317
</td>
<td style="text-align:right;">
0.259323
</td>
<td style="text-align:right;">
5.928866
</td>
<td style="text-align:right;">
5.928866
</td>
<td style="text-align:right;">
3893.168
</td>
<td style="text-align:right;">
3893.168
</td>
<td style="text-align:right;">
2775.775
</td>
<td style="text-align:right;">
2775.775
</td>
</tr>
</tbody>
</table>
</div>
<p>Consolidated params dataframe</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sensitivity_analysis_results</span><span class="op">$</span><span class="va">params</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html" class="external-link">scroll_box</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span>, height <span class="op">=</span> <span class="st">"400px"</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
baseline_scenario
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
target_scenario
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
scenario_geography
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
carbon_price_model
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
risk_free_rate
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
discount_rate
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
growth_rate
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
div_netprofit_prop_coef
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
shock_year
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
market_passthrough
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
run_id
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
NGFS2023GCAM_CP
</td>
<td style="text-align:left;">
NGFS2023GCAM_NZ2050
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
no_carbon_tax
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
0.07
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2030
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
301a3e51-d761-4f45-aa37-252cd4ad4535
</td>
</tr>
<tr>
<td style="text-align:left;">
NGFS2023GCAM_CP
</td>
<td style="text-align:left;">
NGFS2023GCAM_NZ2050
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
no_carbon_tax
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
0.07
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2025
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
e1983d84-c264-4a45-89cc-90feb4d7fae6
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="plot-results">Plot results<a class="anchor" aria-label="anchor" href="#plot-results"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_multi_trajectories.html">plot_multi_trajectories</a></span><span class="op">(</span><span class="va">sensitivity_analysis_results</span><span class="op">$</span><span class="va">trajectories</span><span class="op">)</span></span></code></pre></div>
<p><img src="run-country-sensitivity-analysis_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
